<div class="container">
  <div class="flex-column">
    <div class="d-flex justify-content-between align-items-center mt-5">
      <h1> Employee </h1>
      <%= button_to "All Queries", queries_employees_path, method: :get ,class:"btn-success border-0 rounded shadow  px-3 py-2 " %>
      <%= button_to "View All Leave", leave_plans_path, method: :get ,class:"btn-primary border-0 rounded shadow px-3 py-2" %>
      <%= button_to "Add New Employee", new_employee_path, method: :get ,class:"btn-warning border-0 rounded shadow p-3 m-3" %>
    </div>
    <!-- Employee Table -->
    <div>
      <table class="table table-info table-striped">
        <thead class="table-secondary">
          <td class="text-center"> ID </td>
          <td class="text-center"> Full Name </td>
          <td class="text-center"> Age </td>
          <td class="text-center"> Gender </td>
          <td class="text-center"> Designation </td>
          <td class="text-center"> Joining Date </td>
          <td class="text-center"> Birthdate </td>
          <td class="text-center"> Salary </td>
          <td class="text-center"> Availability </td>
          <td colspan=3 class="text-center"> Action </td>
        </thead>
        <%# --------------------- 
        -> Employees.all.each => Fetch the entire table in a single pass 
        -> This may consume too much memory if the table is big.
        --------------------- %>
        <% @employees.each do |employee| %>
          <%# ---------------------
        -> Employees.find_each =>  Retrieves records in batches 
        -> This retrieves employees in batches of 1000.
        --------------------- %>
          <%# @employees.find_each do |employee| %>
            <%# --------------------- 
        -> Employees.find_each(batch_size: 2000) => Specify the number of records to be retrieved in each batch.
        -> To retrieve records in batches of 2000:
        --------------------- %>
            <%# REFERENCE : https://guides.rubyonrails.org/active_record_querying.html#retrieving-multiple-objects-in-batches %>
            <%# @employees.find_each(batch_size: 2000) do |employee| %>
              <tr>
                <td class="text-center"> <%=  employee.id %> </td>
                <td class="text-center"> <%= link_to employee.first_name + " " + employee.last_name, employee_path(employee) %> </td>
                <td class="text-center"> <%=  employee.age %> </td>
                <td class="text-center"> <%=  employee.gender %> </td>
                <td class="text-center"> <%=  employee.designation.designation_name %> </td>
                <td class="text-center"> <%=  employee.joining_date %> </td>
                <td class="text-center"> <%=  employee.birth_date %> </td>
                <td class="text-center"> <%=  employee.salary %> </td>
                <td class="text-center"> <%=  employee.availability %> </td>
                <td class="text-center"><%= button_to "Edit",edit_employee_path(employee),method: :get, class:"btn-primary border-0 rounded-pill shadow px-3 py-2" %></td>
                <td class="text-center"><%= button_to "Delete",employee_path(employee),method: :delete, data: { turbo: false}, class:"btn-danger border-0 rounded-pill shadow px-3 py-2" %></td>
              </tr>
            <% end %>
          </table>
        </div>
      </div>
    </div>
